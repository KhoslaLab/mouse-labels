<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Usage Guide ‚Äî Mouse Label Printer</title>
<link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üê≠</text></svg>">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;500;600&family=IBM+Plex+Sans:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<style>
  :root { --bg:#f0f0ec; --surface:#ffffff; --border:#d4d4cd; --text:#1a1a18; --text-muted:#6b6b63; --accent:#2d5a27; --accent-light:#e8f0e6; --radius:6px; }
  * { margin:0; padding:0; box-sizing:border-box; }
  body { font-family:'IBM Plex Sans',-apple-system,sans-serif; background:var(--bg); color:var(--text); line-height:1.7; font-size:15px; }
  .header { background:var(--text); color:var(--bg); padding:20px 0; border-bottom:3px solid var(--accent); }
  .header .inner { max-width:780px; margin:0 auto; padding:0 24px; display:flex; align-items:center; gap:16px; }
  .header .logo { width:36px; height:36px; background:var(--accent); border-radius:8px; display:flex; align-items:center; justify-content:center; font-size:18px; flex-shrink:0; }
  .header h1 { font-family:'IBM Plex Mono',monospace; font-size:18px; font-weight:600; }
  .header a { margin-left:auto; color:#999; text-decoration:none; font-size:13px; transition:color 0.15s; }
  .header a:hover { color:#fff; }
  .container { max-width:780px; margin:0 auto; padding:32px 24px 64px 24px; }
  h2 { font-family:'IBM Plex Mono',monospace; font-size:20px; font-weight:600; margin-top:40px; margin-bottom:12px; padding-bottom:8px; border-bottom:2px solid var(--accent); }
  h3 { font-size:16px; font-weight:600; margin-top:28px; margin-bottom:8px; }
  h4 { font-size:14px; font-weight:600; margin-top:20px; margin-bottom:6px; color:var(--text-muted); text-transform:uppercase; letter-spacing:0.5px; }
  p { margin-bottom:12px; }
  ul, ol { margin-bottom:12px; padding-left:24px; }
  li { margin-bottom:6px; }
  strong { font-weight:600; }
  code { font-family:'IBM Plex Mono',monospace; background:var(--accent-light); padding:1px 6px; border-radius:3px; font-size:13px; }
  table { width:100%; border-collapse:collapse; margin:12px 0 20px 0; font-size:14px; }
  th { font-family:'IBM Plex Mono',monospace; font-size:12px; font-weight:600; text-transform:uppercase; letter-spacing:0.5px; text-align:left; padding:8px 12px; background:var(--accent-light); border:1px solid var(--border); color:var(--accent); }
  td { padding:8px 12px; border:1px solid var(--border); background:var(--surface); }
  hr { border:none; border-top:1px solid var(--border); margin:32px 0; }
  .card { background:var(--surface); border:1px solid var(--border); border-left:3px solid var(--accent); border-radius:0 var(--radius) var(--radius) 0; padding:14px 18px; margin:16px 0; font-size:14px; color:var(--text-muted); }
</style>
</head>
<body>

<header class="header">
  <div class="inner">
    <div class="logo">üê≠</div>
    <h1>Usage Guide</h1>
    <a href="index.html">‚Üê Back to App</a>
  </div>
</header>

<div class="container">

<h2>Getting Started</h2>
<p>Open the app in your browser. There are two modes, accessible via the tabs at the top of the page:</p>
<ul>
  <li><strong>Harvest Labels</strong> ‚Äî For generating standard mouse sample labels by AS number range.</li>
  <li><strong>Manual Labels</strong> ‚Äî For creating labels with arbitrary text on each line.</li>
</ul>
<p>Both pages include an <strong>Import from file</strong> bar at the top for loading previously downloaded label files. You can drag and drop a <code>.txt</code> file onto either bar, or click to browse.</p>

<hr>

<h2>Importing a Label File</h2>
<p>You can re-import any <code>.txt</code> file previously downloaded from this app to edit and reprint labels.</p>

<h3>How to import</h3>
<ol>
  <li><strong>Drag and drop</strong> a <code>.txt</code> or <code>.zpl</code> file onto the import bar at the top of either page, <strong>or</strong> click the import bar (or the "Choose File‚Ä¶" button) to browse for a file.</li>
  <li>The app will parse the ZPL in the file and automatically route it to the appropriate page.</li>
</ol>

<h3>Smart routing</h3>
<ul>
  <li><strong>Harvest Labels page</strong> ‚Äî If the file contains labels where every Line 1 is an AS number (e.g., AS2243), the AS numbers form a contiguous range, and every mouse has the same set of sample labels, the file loads into the Harvest Labels page. The AS range, date, project name, and sample labels are all pre-filled. If the samples match the standard template, Standard mode is selected; otherwise, Custom mode is activated with the labels loaded as editable chips.</li>
  <li><strong>Manual Labels page</strong> ‚Äî If the file does not match a harvest pattern (e.g., it has mixed Line 1 values, non-contiguous AS numbers, or different sample sets per mouse), it loads into the Manual Labels page with each unique label as an editable row. Duplicate labels are grouped with their quantity.</li>
</ul>
<p>Once imported, you can change the AS range, date, project name, or individual labels before regenerating and reprinting.</p>

<hr>

<h2>Harvest Labels</h2>
<p>Use this mode when processing mice and you need the standard set of sample labels for each mouse.</p>

<h3>Step 1: Mouse Range, Date, &amp; Project</h3>
<ul>
  <li><strong>First AS Number</strong> ‚Äî Enter the number (without the "AS" prefix) of the first mouse. For example, enter <code>2243</code> for AS2243.</li>
  <li><strong>Last AS Number</strong> ‚Äî Enter the last mouse number in the range. Leave blank if printing labels for a single mouse.</li>
  <li><strong>Date</strong> ‚Äî Defaults to today. This date prints on every label (unless unchecked ‚Äî see below).</li>
  <li><strong>Project Name</strong> ‚Äî Optional. If provided, it will be included in the downloaded filename (e.g., <code>20260226_INK-ATTAC_AS2243-AS2250.txt</code>).</li>
  <li><strong>Include date on labels</strong> ‚Äî Checked by default. Uncheck to omit the date line from all labels.</li>
  <li><strong>Print project name on labels (4th line)</strong> ‚Äî When checked, the project name is printed as a fourth line on every label.</li>
</ul>
<div class="card">A character counter appears next to the project name field as you approach or exceed the 13-character limit. Text longer than 13 characters may not fit within a label column.</div>

<h3>Step 2: Sample Labels</h3>
<p>Choose one of two options:</p>

<h4>Standard Harvest Template</h4>
<p>Click <strong>Standard Harvest Template</strong> (selected by default). This uses the predefined set of 15 sample labels per mouse:</p>
<table>
  <thead><tr><th>Label #</th><th>Sample Name</th><th>Purpose</th></tr></thead>
  <tbody>
    <tr><td>1‚Äì3</td><td>Plasma</td><td>Plasma storage tubes</td></tr>
    <tr><td>4</td><td>LFemur+L4-6</td><td>Left femur + lumbar vertebrae 4‚Äì6, for microCT/plastic embedding</td></tr>
    <tr><td>5</td><td>LTibia+L1-3</td><td>Left tibia + lumbar vertebrae 1‚Äì3, for paraffin embedding</td></tr>
    <tr><td>6</td><td>RFem+RTib</td><td>Right femur + right tibia, for met/dia RNA</td></tr>
    <tr><td>7</td><td>Met</td><td>Metaphysis ‚Äî 50 mL tube, homogenize in Trizol for RNA</td></tr>
    <tr><td>8</td><td>Dia</td><td>Diaphysis ‚Äî 50 mL tube, homogenize in Trizol for RNA</td></tr>
    <tr><td>9</td><td>Vert</td><td>Thoracic vertebrae ‚Äî 50 mL tube, homogenize in Trizol for RNA</td></tr>
    <tr><td>10</td><td>Met</td><td>Metaphysis ‚Äî 1.5 mL tube for RNA</td></tr>
    <tr><td>11</td><td>Dia</td><td>Diaphysis ‚Äî 1.5 mL tube for RNA</td></tr>
    <tr><td>12</td><td>Vert</td><td>Thoracic vertebrae ‚Äî 1.5 mL tube for RNA</td></tr>
    <tr><td>13</td><td>Met/Dia</td><td>Metaphysis/diaphysis ‚Äî tube to spin out marrow</td></tr>
    <tr><td>14</td><td>Vert</td><td>Thoracic vertebrae ‚Äî tube to spin out marrow</td></tr>
    <tr><td>15</td><td>Ear/tail</td><td>Ear or tail cut for confirmatory genotyping</td></tr>
  </tbody>
</table>
<p>These are printed 3-across, resulting in 5 physical labels per mouse.</p>

<h4>Custom Labels</h4>
<p>Click <strong>Custom Labels</strong> to define your own set of sample names:</p>
<ol>
  <li>Type a sample name in the text field and click <strong>+ Add</strong> (or press Enter). A character counter shows when you're near or over the 13-character limit.</li>
  <li>Click <strong>+ Blank</strong> to add a label with just the AS number and date (no sample name).</li>
  <li>Click <strong>Load Standard Template</strong> to pre-fill with the standard harvest labels ‚Äî useful when you only need to change a few.</li>
  <li><strong>Click</strong> any label name to edit it in place. Press Enter to confirm, or Escape to cancel.</li>
  <li><strong>Drag</strong> labels to reorder them ‚Äî grab any label chip and drop it in a new position.</li>
  <li>Click the <strong>√ó</strong> on any chip to remove it.</li>
  <li>Click <strong>Clear</strong> to remove all custom labels.</li>
</ol>

<h3>Step 3: Generate &amp; Print</h3>
<ol>
  <li>Click <strong>Generate Labels</strong> to create the ZPL data and see a preview.</li>
  <li>Use one of two methods to print:</li>
</ol>

<h4>Option A: Print to Zebra (recommended)</h4>
<ol>
  <li>Click <strong>Print to Zebra</strong>.</li>
  <li>Your browser's print dialog will open.</li>
  <li>Select your Zebra printer from the printer list.</li>
  <li>Click Print.</li>
</ol>

<h4>Option B: Download and print from Notepad</h4>
<ol>
  <li>Click <strong>Download .txt</strong> to save the file.</li>
  <li>Open the downloaded <code>.txt</code> file in Notepad.</li>
  <li>Go to <strong>File ‚Üí Print</strong>.</li>
  <li>Select your Zebra printer from the printer list.</li>
  <li>Click Print.</li>
</ol>

<hr>

<h2>Manual Labels</h2>
<p>Use this mode to create labels with any text ‚Äî not limited to AS numbers or standard sample names.</p>

<h3>Step 1: Create Labels</h3>
<ul>
  <li><strong>Date</strong> ‚Äî Shared across all labels. Prints on the third line of every label (unless unchecked).</li>
  <li><strong>Project Name</strong> ‚Äî Optional. Included in the downloaded filename.</li>
  <li><strong>Include date on labels</strong> ‚Äî Checked by default. Uncheck to omit the date line.</li>
  <li><strong>Print project name on labels (4th line)</strong> ‚Äî When checked, the project name prints on every label.</li>
</ul>
<p>Each row in the table defines one label:</p>
<ul>
  <li><strong>Line 1 (top)</strong> ‚Äî Any text for the first line (e.g., an AS number, a sample ID, or a name).</li>
  <li><strong>Line 2 (middle)</strong> ‚Äî Any text for the second line (e.g., a sample type, or a description).</li>
  <li><strong>Qty</strong> ‚Äî Number of copies of this label to print. Defaults to 1.</li>
</ul>
<div class="card">A character counter appears on each text field as you approach or exceed the 13-character limit. Text that exceeds this limit will be highlighted and may not fit on the physical label.</div>
<p>Click <strong>+ Add Row</strong> to add more labels. Click the <strong>√ó</strong> button on any row to remove it. Click <strong>Clear All</strong> to start over.</p>

<h3>Step 2: Generate &amp; Print</h3>
<p>Same as Harvest Labels ‚Äî click <strong>Generate Labels</strong>, then use <strong>Print to Zebra</strong> or <strong>Download .txt</strong>.</p>

<hr>

<h2>Label Preview</h2>
<p>After generating, a preview section shows how labels will be grouped on physical labels (3 columns per label). You can expand <strong>Show raw ZPL</strong> to see the exact ZPL commands that will be sent to the printer.</p>
<ul>
  <li>Labels shown in <strong style="color:#9b2c2c">red text</strong> in the preview have text that may be too long to fit.</li>
  <li>Blank label slots appear as empty space between the top line and date.</li>
  <li>When the project name is printed on labels, it appears as a gold-colored 4th line in the preview.</li>
</ul>

<hr>

<h2>Character Limits</h2>
<p>Each label column is approximately 200 dots wide. Using Zebra Font D, this accommodates roughly <strong>13 characters</strong> comfortably. Character counters appear on all text inputs:</p>
<ul>
  <li>The counter turns <strong>amber</strong> as you approach the limit.</li>
  <li>The counter turns <strong>red</strong> with a "may not fit" warning when you exceed it.</li>
  <li>Labels that exceed the limit are highlighted in red in the preview.</li>
</ul>
<p>You can still generate and print labels with longer text, but the text may be clipped on the physical label.</p>

<hr>

<h2>Downloaded Filename Format</h2>
<p>Downloaded files are named with the date first in YYYYMMDD format:</p>
<table>
  <thead><tr><th>Mode</th><th>Example Filename</th></tr></thead>
  <tbody>
    <tr><td>Harvest</td><td><code>20260226_INK-ATTAC_AS2243-AS2250.txt</code></td></tr>
    <tr><td>Harvest (no project)</td><td><code>20260226_AS2243-AS2250.txt</code></td></tr>
    <tr><td>Manual</td><td><code>20260226_INK-ATTAC_manual_labels.txt</code></td></tr>
    <tr><td>Manual (no project)</td><td><code>20260226_manual_labels.txt</code></td></tr>
  </tbody>
</table>

<hr>

<h2>Printer Setup</h2>
<p>The Zebra printer must be installed on your computer as a standard Windows/Mac printer. No special software (such as Zebra Browser Print) is required.</p>

<h3>Verifying your printer is set up</h3>
<ul>
  <li><strong>Windows</strong> ‚Äî Go to <strong>Settings ‚Üí Devices ‚Üí Printers &amp; scanners</strong> and confirm your Zebra printer appears in the list.</li>
  <li><strong>Mac</strong> ‚Äî Go to <strong>System Settings ‚Üí Printers &amp; Scanners</strong> and confirm your Zebra printer appears.</li>
</ul>
<p>If the printer is not listed, install it using the Zebra printer driver for your model before using this app.</p>

<hr>

<h2>Troubleshooting</h2>
<table>
  <thead><tr><th>Problem</th><th>Solution</th></tr></thead>
  <tbody>
    <tr><td>Labels print as plain text instead of formatted labels</td><td>Make sure you selected the Zebra printer (not a paper printer) in the print dialog. The Zebra interprets the ZPL commands directly.</td></tr>
    <tr><td>Text is cut off on the right side of a label</td><td>The label text is too long. Shorten it to 13 characters or fewer.</td></tr>
    <tr><td>Browser print dialog doesn't show the Zebra printer</td><td>The printer may not be installed. See Printer Setup above.</td></tr>
    <tr><td>Nothing prints</td><td>Check that the Zebra printer is powered on, connected, and has labels loaded.</td></tr>
    <tr><td>Labels are misaligned</td><td>Check that the correct label size is configured in the Zebra printer driver settings.</td></tr>
    <tr><td>Imported file loads into the wrong page</td><td>The app auto-detects harvest patterns (contiguous AS numbers with identical samples per mouse). Files that don't match this pattern load into Manual Labels. You can always manually re-enter labels on either page.</td></tr>
  </tbody>
</table>

</div>
</body>
</html>
